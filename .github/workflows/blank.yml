name: ğŸ’€ Klinux-Fix

on: 
  workflow_dispatch:

jobs:
  kali-run:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸš€ 1. Setup Basic
        run: |
          sudo apt-get update -y
          sudo apt-get install -y docker.io openssh-server -y

      - name: ğŸ›¡ï¸ 2. Connect Tailscale
        uses: tailscale/github-action@v2
        with:
          authkey: ${{ secrets.TAILSCALE_AUTHKEY }}
          hostname: CyberLexS-Klinux

      - name: ğŸ‘¤ 3. User Info
        run: |
          sudo useradd -m -s /bin/bash CyberLexS
          echo "CyberLexS:Nam12345" | sudo chpasswd
          sudo usermod -aG sudo CyberLexS
          sudo service ssh restart

      - name: ğŸ´â€â˜ ï¸ 4. Start Kali
        run: |
          sudo docker run -d --name klinux --network host -it kalilinux/kali-rolling /bin/bash

      - name: ğŸ“‹ 5. DISPLAY INFO
        run: |
          IP_ADDR=$(tailscale ip -4)
          echo "=========================================="
          echo "ğŸ“ IP: $IP_ADDR"
          echo "ğŸ‘¤ USER: CyberLexS"
          echo "ğŸ”‘ PASS: Nam12345"
          echo "=========================================="

      - name: âš“ 6. Keep Alive
        run: sleep 21600
